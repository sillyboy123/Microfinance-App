@page
@{
    ViewData["Title"] = "Database Connectivity Test";
    Layout = "_Layout";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header p-4 bg-primary text-white">
                    <h2 class="mb-0"><i class="fas fa-database me-2"></i>Database Connectivity Test</h2>
                </div>
                <div class="card-body p-4">
                    <div class="alert alert-info mb-4">
                        <p class="mb-0">This page helps diagnose database connectivity issues in your Microfinance App.</p>
                    </div>

                    <div class="d-grid gap-3">
                        <a href="/ConnectionTest" class="btn btn-primary btn-lg">
                            <i class="fas fa-check-circle me-2"></i>Run Full Connection Test
                        </a>
                        
                        <a href="/Home/Diagnostics" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-heartbeat me-2"></i>Quick Diagnostics
                        </a>
                    </div>
                    
                    <hr class="my-4">
                    
                    <h5>Database Troubleshooting Tools</h5>
                    <div class="list-group mb-4">
                        <a href="/DatabaseTroubleshooting.md" target="_blank" class="list-group-item list-group-item-action d-flex align-items-center">
                            <i class="fas fa-book me-3 text-primary fs-4"></i>
                            <div>
                                <h6 class="mb-1">Database Troubleshooting Guide</h6>
                                <small class="text-muted">Step-by-step instructions for resolving connection issues</small>
                            </div>
                        </a>
                        <a href="#" onclick="runSetupLocalDb(); return false;" class="list-group-item list-group-item-action d-flex align-items-center">
                            <i class="fas fa-server me-3 text-primary fs-4"></i>
                            <div>
                                <h6 class="mb-1">Setup LocalDB</h6>
                                <small class="text-muted">Configure SQL Server LocalDB for the application</small>
                            </div>
                        </a>
                        <a href="#" onclick="runSetupSQLite(); return false;" class="list-group-item list-group-item-action d-flex align-items-center">
                            <i class="fas fa-database me-3 text-primary fs-4"></i>
                            <div>
                                <h6 class="mb-1">Switch to SQLite</h6>
                                <small class="text-muted">Use SQLite as an alternative database</small>
                            </div>
                        </a>
                    </div>
                    
                    <div class="alert alert-warning mb-0">
                        <p><strong>Note:</strong> The setup scripts need to be run manually from your file explorer if you click on them above. They're located in the application's root folder:</p>
                        <ul class="mb-0">
                            <li><code>SetupLocalDB.bat</code> - Configures SQL Server LocalDB</li>
                            <li><code>SetupSQLiteBackup.bat</code> - Switches to SQLite database</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    function runSetupLocalDb() {
        alert("Please run the SetupLocalDB.bat file manually from your file explorer. It's located in the application root folder.");
    }
    
    function runSetupSQLite() {
        alert("Please run the SetupSQLiteBackup.bat file manually from your file explorer. It's located in the application root folder.");
    }
</script>
}
